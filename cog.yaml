build:
  gpu: true
  cuda: "11.8"
  python_version: "3.8"
  system_packages:
    - "ffmpeg"
    - "libsox-dev"
    - "sox"
    - "git"
    - "git-lfs"
  python_packages:
    - "torch==2.0.1"
    - "torchaudio==2.0.1"
    - "numpy==1.24.3"
    - "transformers==4.30.2"
    - "modelscope==1.9.5"
    - "pynini==2.1.5"
  run:
    - git clone --recursive https://github.com/FunAudioLLM/CosyVoice.git .
    - git submodule update --init --recursive
    - pip install -r requirements.txt
    - mkdir -p pretrained_models
    - python -c "from modelscope import snapshot_download; snapshot_download('iic/CosyVoice-300M', local_dir='pretrained_models/CosyVoice-300M'); snapshot_download('iic/CosyVoice-300M-SFT', local_dir='pretrained_models/CosyVoice-300M-SFT'); snapshot_download('iic/CosyVoice-300M-Instruct', local_dir='pretrained_models/CosyVoice-300M-Instruct')"

predict: "predict.py:Predictor"